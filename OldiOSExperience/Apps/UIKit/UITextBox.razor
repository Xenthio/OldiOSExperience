@* iOS 5 UITextBox Component - Similar to UITextField but optimized for table cells *@
@using OldiOSExperience.Apps.UIKit

<div class="uitextbox-cell @(FullWidth ? "full-width" : "")">
    <div class="textbox-wrapper">
        @if (!string.IsNullOrEmpty(Label))
        {
            <div class="textbox-label">@Label</div>
        }
        <input type="@InputType"
               class="uitextbox"
               placeholder="@Placeholder"
               value="@Value"
               disabled="@Disabled"
               @oninput="HandleInput"
               @onfocus="HandleFocus"
               @onblur="HandleBlur" />
    </div>
</div>

@code {
    [Parameter]
    public string? Value { get; set; }
    
    [Parameter]
    public EventCallback<string> ValueChanged { get; set; }
    
    [Parameter]
    public string? Placeholder { get; set; }
    
    [Parameter]
    public string? Label { get; set; }
    
    [Parameter]
    public string InputType { get; set; } = "text";
    
    [Parameter]
    public bool Disabled { get; set; } = false;
    
    [Parameter]
    public bool FullWidth { get; set; } = true;
    
    [Parameter]
    public EventCallback OnFocus { get; set; }
    
    [Parameter]
    public EventCallback OnBlur { get; set; }
    
    private async Task HandleInput(ChangeEventArgs e)
    {
        Value = e.Value?.ToString();
        await ValueChanged.InvokeAsync(Value);
    }
    
    private async Task HandleFocus()
    {
        await OnFocus.InvokeAsync();
    }
    
    private async Task HandleBlur()
    {
        await OnBlur.InvokeAsync();
    }
}
