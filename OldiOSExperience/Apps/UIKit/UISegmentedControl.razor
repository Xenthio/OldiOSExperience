@* iOS 5 UISegmentedControl Component *@

<div class="uisegmented-control @(FullWidth ? "full-width" : "") @(Disabled ? "disabled" : "")">
    @foreach (var (segment, index) in Segments.Select((s, i) => (s, i)))
    {
        <button class="segment @(SelectedIndex == index ? "selected" : "")"
                @onclick="() => HandleSegmentClick(index)"
                disabled="@Disabled"
                type="button">
            @segment
        </button>
    }
</div>

@code {
    [Parameter]
    public List<string> Segments { get; set; } = new();
    
    [Parameter]
    public int SelectedIndex { get; set; } = 0;
    
    [Parameter]
    public EventCallback<int> SelectedIndexChanged { get; set; }
    
    [Parameter]
    public bool Disabled { get; set; } = false;
    
    [Parameter]
    public bool FullWidth { get; set; } = false;
    
    [Parameter]
    public EventCallback<int> OnSegmentChange { get; set; }
    
    private async Task HandleSegmentClick(int index)
    {
        if (!Disabled && index != SelectedIndex)
        {
            await SelectedIndexChanged.InvokeAsync(index);
            await OnSegmentChange.InvokeAsync(index);
        }
    }
}
