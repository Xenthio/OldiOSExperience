@* iOS 5 UIButton Component *@
@using OldiOSExperience.Apps.UIKit

<button class="uibutton @StyleClass @(Disabled ? "disabled" : "") @(FullWidth ? "full-width" : "")" 
        @onclick="HandleClick"
        disabled="@Disabled"
        type="@Type">
    @if (!string.IsNullOrEmpty(Icon))
    {
        <img src="@Icon" alt="" class="button-icon" />
    }
    @if (ChildContent != null)
    {
        @ChildContent
    }
    else
    {
        @Text
    }
</button>

@code {
    [Parameter]
    public string? Text { get; set; }
    
    [Parameter]
    public string? Icon { get; set; }
    
    [Parameter]
    public UIButtonStyle Style { get; set; } = UIButtonStyle.Default;
    
    [Parameter]
    public bool Disabled { get; set; } = false;
    
    [Parameter]
    public bool FullWidth { get; set; } = false;
    
    [Parameter]
    public string Type { get; set; } = "button";
    
    [Parameter]
    public EventCallback OnClick { get; set; }
    
    [Parameter]
    public RenderFragment? ChildContent { get; set; }
    
    private string StyleClass => Style switch
    {
        UIButtonStyle.Default => "default",
        UIButtonStyle.Bordered => "bordered",
        UIButtonStyle.Destructive => "destructive",
        UIButtonStyle.Custom => "custom",
        _ => "default"
    };
    
    private async Task HandleClick(MouseEventArgs e)
    {
        if (!Disabled)
        {
            await OnClick.InvokeAsync();
        }
    }
}
