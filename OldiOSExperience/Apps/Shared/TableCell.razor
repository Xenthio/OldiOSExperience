@* iOS Table Cell Component *@

<div class="ios-table-cell @(IsLast ? "last" : "")" @onclick="OnClick">
    @if (!string.IsNullOrEmpty(Icon))
    {
        <div class="cell-icon">
            <img src="@Icon" alt="" />
        </div>
    }
    
    <div class="cell-content">
        <div class="cell-text">@Text</div>
        @if (!string.IsNullOrEmpty(Detail))
        {
            <div class="cell-detail">@Detail</div>
        }
    </div>
    
    @if (ShowDisclosure)
    {
        <div class="cell-accessory">â€º</div>
    }
    else if (ShowToggle)
    {
        <div class="cell-toggle">
            <label class="ios-switch">
                <input type="checkbox" checked="@ToggleValue" @onchange="HandleToggleChange" />
                <span class="slider">
                    <span class="slider-knob"></span>
                </span>
            </label>
        </div>
    }
</div>

@code {
    [Parameter]
    public required string Text { get; set; }
    
    [Parameter]
    public string? Detail { get; set; }
    
    [Parameter]
    public string? Icon { get; set; }
    
    [Parameter]
    public bool ShowDisclosure { get; set; } = false;
    
    [Parameter]
    public bool ShowToggle { get; set; } = false;
    
    [Parameter]
    public bool ToggleValue { get; set; } = false;
    
    [Parameter]
    public EventCallback<bool> OnToggleChange { get; set; }
    
    [Parameter]
    public EventCallback OnClick { get; set; }
    
    [Parameter]
    public bool IsLast { get; set; } = false;
    
    private async Task HandleToggleChange(ChangeEventArgs e)
    {
        var newValue = (bool)(e.Value ?? false);
        await OnToggleChange.InvokeAsync(newValue);
    }
}
