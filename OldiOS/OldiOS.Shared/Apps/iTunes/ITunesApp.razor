@* iOS 5 iTunes Store *@
@using OldiOS.Shared.Apps.UIKit

<div class="itunes-app">
    <UINavigationBar Title="@GetCurrentTitle()" />
    
    <div class="itunes-content">
        @if (CurrentTab == "music")
        {
            <div class="music-store">
                <div class="empty-state">
                    <div class="empty-icon"><img src="_content/OldiOS.Shared/images/icons/itunes-icon.png" alt="iTunes" style="width: 120px; height: 120px; opacity: 0.3;" /></div>
                    <div class="empty-text">iTunes Store</div>
                    <div class="empty-hint">Browse and purchase music</div>
                </div>
            </div>
        }
        else if (CurrentTab == "movies")
        {
            <div class="movies-store">
                <div class="empty-state">
                    <div class="empty-icon"><img src="_content/OldiOS.Shared/images/icons/itunes-icon.png" alt="iTunes" style="width: 120px; height: 120px; opacity: 0.3;" /></div>
                    <div class="empty-text">Movies</div>
                </div>
            </div>
        }
        else if (CurrentTab == "tv")
        {
            <div class="tv-store">
                <div class="empty-state">
                    <div class="empty-icon"><img src="_content/OldiOS.Shared/images/icons/itunes-icon.png" alt="iTunes" style="width: 120px; height: 120px; opacity: 0.3;" /></div>
                    <div class="empty-text">TV Shows</div>
                </div>
            </div>
        }
        else if (CurrentTab == "search")
        {
            <UISearchBar Placeholder="Search" ShowsCancelButton="false" />
            <div class="search-results">
                <div class="empty-state">
                    <div class="empty-icon"><img src="_content/OldiOS.Shared/images/icons/search-icon.png" alt="Search" style="width: 80px; height: 80px; opacity: 0.3;" /></div>
                    <div class="empty-text">Search iTunes Store</div>
                </div>
            </div>
        }
        else if (CurrentTab == "downloads")
        {
            <div class="downloads-list">
                <div class="empty-state">
                    <div class="empty-icon"><img src="_content/OldiOS.Shared/images/icons/download-icon.png" alt="Downloads" style="width: 80px; height: 80px; opacity: 0.3;" /></div>
                    <div class="empty-text">No Downloads</div>
                </div>
            </div>
        }
    </div>
    
    <UITabBar Items="@TabBarItems" OnItemSelected="HandleTabSelected" />
</div>

@code {
    private string CurrentTab = "music";
    
    private List<UITabBarItem> TabBarItems = new()
    {
        new UITabBarItem { Title = "Music", Tag = "music", Icon = "_content/OldiOS.Shared/images/icons/tab-music.png", IsSelected = true },
        new UITabBarItem { Title = "Movies", Tag = "movies", Icon = "_content/OldiOS.Shared/images/icons/tab-movies.png" },
        new UITabBarItem { Title = "TV Shows", Tag = "tv", Icon = "_content/OldiOS.Shared/images/icons/tab-tv.png" },
        new UITabBarItem { Title = "Search", Tag = "search", Icon = "_content/OldiOS.Shared/images/icons/tab-search.png" },
        new UITabBarItem { Title = "Downloads", Tag = "downloads", Icon = "_content/OldiOS.Shared/images/icons/tab-downloads.png" }
    };
    
    private string GetCurrentTitle()
    {
        var selectedTab = TabBarItems.FirstOrDefault(t => t.Tag == CurrentTab);
        return selectedTab?.Title ?? "iTunes";
    }
    
    private void HandleTabSelected(UITabBarItem item)
    {
        CurrentTab = item.Tag;
        StateHasChanged();
    }
}
