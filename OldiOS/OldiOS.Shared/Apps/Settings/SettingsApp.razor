@using OldiOS.Shared.Apps.UIKit

<div class="settings-app">
    @* Static navigation bar that doesn't move *@
    <UINavigationBar Title="@currentTitle" 
                     BackButtonText="@(currentTitle != "Settings" ? "Settings" : "")"
                     OnBackClick="NavigateBack"
                     AnimationClass="@GetTitleAnimationClass(currentTitle)"
                     ButtonAnimationClass="@GetButtonAnimationClass()" />
    
    @* Content area where pages slide *@
    <div class="settings-pages-container">
        @if (currentPageContent != null)
        {
            <div class="settings-page @GetCurrentPageAnimationClass()" @key="currentPageKey">
                @currentPageContent
            </div>
        }
        
        @if (nextPageContent != null && isAnimating)
        {
            <div class="settings-page @GetNextPageAnimationClass()" @key="nextPageKey">
                @nextPageContent
            </div>
        }
    </div>
</div>

@code {
    private RenderFragment? currentPageContent;
    private RenderFragment? nextPageContent;
    private bool isAnimating = false;
    private string animationDirection = ""; // "forward" or "back"
    private bool airplaneMode = false;
    private int currentPageKey = 0;
    private int nextPageKey = 1;
    
    // Track current and next titles for animation
    private string currentTitle = "Settings";
    private string nextTitle = "";
    
    protected override void OnInitialized()
    {
        currentPageContent = RenderMainMenuContent();
    }
    
    private void NavigateTo(string pageName)
    {
        if (isAnimating) return;
        
        nextTitle = pageName;
        nextPageContent = pageName switch
        {
            "Wi-Fi" => RenderWiFiContent(),
            "Bluetooth" => RenderBluetoothContent(),
            "Cellular" => RenderCellularContent(),
            "Notifications" => RenderNotificationsContent(),
            "Sounds" => RenderSoundsContent(),
            "Brightness" => RenderBrightnessContent(),
            "Privacy" => RenderPrivacyContent(),
            "General" => RenderGeneralContent(),
            "iCloud" => RenderICloudContent(),
            "Safari" => RenderSafariContent(),
            "Mail" => RenderMailContent(),
            _ => null
        };
        
        if (nextPageContent != null)
        {
            isAnimating = true;
            animationDirection = "forward";
            nextPageKey++;
            StateHasChanged();
            
            Task.Delay(300).ContinueWith(_ =>
            {
                InvokeAsync(() =>
                {
                    currentPageContent = nextPageContent;
                    currentTitle = nextTitle;
                    currentPageKey = nextPageKey;
                    nextPageContent = null;
                    nextTitle = "";
                    isAnimating = false;
                    animationDirection = "";
                    StateHasChanged();
                });
            });
        }
    }
    
    private void NavigateBack()
    {
        if (isAnimating) return;
        
        nextTitle = "Settings";
        nextPageContent = RenderMainMenuContent();
        isAnimating = true;
        animationDirection = "back";
        nextPageKey++;
        StateHasChanged();
        
        Task.Delay(300).ContinueWith(_ =>
        {
            InvokeAsync(() =>
            {
                currentPageContent = nextPageContent;
                currentTitle = nextTitle;
                currentPageKey = nextPageKey;
                nextPageContent = null;
                nextTitle = "";
                isAnimating = false;
                animationDirection = "";
                StateHasChanged();
            });
        });
    }
    
    
    private string GetCurrentPageAnimationClass()
    {
        if (!isAnimating) return "";
        
        if (animationDirection == "forward")
        {
            return "slide-out-left";
        }
        else if (animationDirection == "back")
        {
            return "slide-out-right";
        }
        
        return "";
    }
    
    private string GetNextPageAnimationClass()
    {
        if (!isAnimating) return "";
        
        if (animationDirection == "forward")
        {
            return "slide-in-right";
        }
        else if (animationDirection == "back")
        {
            return "slide-in-left";
        }
        
        return "";
    }
    
    private string GetTitleAnimationClass(string pageTitle)
    {
        if (!isAnimating) return "";
        
        // Determine if this is the current page or next page
        bool isCurrentPage = pageTitle == currentTitle;
        bool isNextPage = pageTitle == nextTitle;
        
        if (animationDirection == "forward")
        {
            // Forward navigation: current title slides left, new title slides in from right
            if (isCurrentPage) return "title-slide-out-left";
            if (isNextPage) return "title-slide-in-right";
        }
        else if (animationDirection == "back")
        {
            // Back navigation: current title slides right, previous title slides in from left
            if (isCurrentPage) return "title-slide-out-right";
            if (isNextPage) return "title-slide-in-left";
        }
        
        return "";
    }
    
    private string GetButtonAnimationClass()
    {
        // Buttons fade in during transitions
        return isAnimating ? "fade-in" : "";
    }
    
    private RenderFragment RenderMainMenuContent() => builder =>
    {
        builder.OpenElement(0, "div");
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(2);
        builder.AddAttribute(3, "Grouped", true);
        builder.AddAttribute(4, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            // Airplane/Network section
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Airplane Mode");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", airplaneMode);
                sectionBuilder.AddAttribute(4, "OnToggleChange", EventCallback.Factory.Create<bool>(this, v => airplaneMode = v));
                sectionBuilder.AddAttribute(5, "Icon", "images/icons/settings/airplane.png");
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(6);
                sectionBuilder.AddAttribute(7, "Text", "Wi-Fi");
                sectionBuilder.AddAttribute(8, "Detail", "Not Connected");
                sectionBuilder.AddAttribute(9, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(10, "Icon", "images/icons/settings/wifi.png");
                sectionBuilder.AddAttribute(11, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Wi-Fi")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(12);
                sectionBuilder.AddAttribute(13, "Text", "Bluetooth");
                sectionBuilder.AddAttribute(14, "Detail", "Off");
                sectionBuilder.AddAttribute(15, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(16, "Icon", "images/icons/settings/bluetooth.png");
                sectionBuilder.AddAttribute(17, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Bluetooth")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(18);
                sectionBuilder.AddAttribute(19, "Text", "Cellular");
                sectionBuilder.AddAttribute(20, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(21, "Icon", "images/icons/settings/cellular.png");
                sectionBuilder.AddAttribute(22, "IsLast", true);
                sectionBuilder.AddAttribute(23, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Cellular")));
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            // Notifications section
            tableBuilder.OpenComponent<UITableViewSection>(24);
            tableBuilder.AddAttribute(25, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Notifications");
                sectionBuilder.AddAttribute(2, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(3, "Icon", "images/icons/settings/notifications.png");
                sectionBuilder.AddAttribute(4, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Notifications")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(5);
                sectionBuilder.AddAttribute(6, "Text", "Sounds");
                sectionBuilder.AddAttribute(7, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(8, "Icon", "images/icons/settings/sounds.png");
                sectionBuilder.AddAttribute(9, "IsLast", true);
                sectionBuilder.AddAttribute(10, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Sounds")));
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            // General section
            tableBuilder.OpenComponent<UITableViewSection>(26);
            tableBuilder.AddAttribute(27, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "General");
                sectionBuilder.AddAttribute(2, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(3, "Icon", "images/icons/settings/general.png");
                sectionBuilder.AddAttribute(4, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("General")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(5);
                sectionBuilder.AddAttribute(6, "Text", "Brightness & Wallpaper");
                sectionBuilder.AddAttribute(7, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(8, "Icon", "images/icons/settings/brightness.png");
                sectionBuilder.AddAttribute(9, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Brightness")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(10);
                sectionBuilder.AddAttribute(11, "Text", "Privacy");
                sectionBuilder.AddAttribute(12, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(13, "Icon", "images/icons/settings/privacy.png");
                sectionBuilder.AddAttribute(14, "IsLast", true);
                sectionBuilder.AddAttribute(15, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Privacy")));
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            // Apps section
            tableBuilder.OpenComponent<UITableViewSection>(28);
            tableBuilder.AddAttribute(29, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "iCloud");
                sectionBuilder.AddAttribute(2, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(3, "Icon", "images/icons/settings/icloud.png");
                sectionBuilder.AddAttribute(4, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("iCloud")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(5);
                sectionBuilder.AddAttribute(6, "Text", "Mail, Contacts, Calendars");
                sectionBuilder.AddAttribute(7, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(8, "Icon", "images/icons/settings/mail.png");
                sectionBuilder.AddAttribute(9, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Mail")));
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(10);
                sectionBuilder.AddAttribute(11, "Text", "Safari");
                sectionBuilder.AddAttribute(12, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(13, "Icon", "images/icons/settings/safari.png");
                sectionBuilder.AddAttribute(14, "IsLast", true);
                sectionBuilder.AddAttribute(15, "OnClick", EventCallback.Factory.Create(this, () => NavigateTo("Safari")));
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement(); // settings-content
    };
    
    // Sub-page render methods (content only, no navigation bar)
    private RenderFragment RenderWiFiContent() => builder =>
    {
        builder.OpenElement(0, "div");
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Wi-Fi");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", false);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "CHOOSE A NETWORK...");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "No networks found");
                sectionBuilder.AddAttribute(2, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement(); // settings-content
        builder.CloseElement(); // settings-page-content
    };
    
    private RenderFragment RenderBluetoothContent() => builder =>
    {
        builder.OpenElement(0, "div");
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(2);
        builder.AddAttribute(3, "Grouped", true);
        builder.AddAttribute(4, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Bluetooth");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", false);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "DEVICES");
            tableBuilder.AddAttribute(4, "Footer", "Turn on Bluetooth to connect to nearby devices.");
            tableBuilder.AddAttribute(5, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "No devices");
                sectionBuilder.AddAttribute(2, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement(); // settings-content
    };
    
    private RenderFragment RenderCellularContent() => builder =>
    {
        builder.OpenElement(0, "div");
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(2);
        builder.AddAttribute(3, "Grouped", true);
        builder.AddAttribute(4, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Cellular Data");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "Enable 3G");
                sectionBuilder.AddAttribute(6, "ShowToggle", true);
                sectionBuilder.AddAttribute(7, "ToggleValue", true);
                sectionBuilder.AddAttribute(8, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "DATA ROAMING");
            tableBuilder.AddAttribute(4, "Footer", "Turn off data roaming when traveling to avoid charges.");
            tableBuilder.AddAttribute(5, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Data Roaming");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", false);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
        builder.CloseElement();
    };
    
    private RenderFragment RenderNotificationsContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "Header", "NOTIFICATION CENTER");
            tableBuilder.AddAttribute(2, "Footer", "Apps and services may request to send you notifications.");
            tableBuilder.AddAttribute(3, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Messages");
                sectionBuilder.AddAttribute(2, "ShowDisclosure", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(3);
                sectionBuilder.AddAttribute(4, "Text", "Phone");
                sectionBuilder.AddAttribute(5, "ShowDisclosure", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(6);
                sectionBuilder.AddAttribute(7, "Text", "Mail");
                sectionBuilder.AddAttribute(8, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(9, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
    
    private RenderFragment RenderSoundsContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Vibrate on Ring");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "Vibrate on Silent");
                sectionBuilder.AddAttribute(6, "ShowToggle", true);
                sectionBuilder.AddAttribute(7, "ToggleValue", true);
                sectionBuilder.AddAttribute(8, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "RINGER AND ALERTS");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Ringtone");
                sectionBuilder.AddAttribute(2, "Detail", "Marimba");
                sectionBuilder.AddAttribute(3, "ShowDisclosure", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "Text Tone");
                sectionBuilder.AddAttribute(6, "Detail", "Tri-tone");
                sectionBuilder.AddAttribute(7, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(8, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
    
    private RenderFragment RenderBrightnessContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "Header", "BRIGHTNESS");
            tableBuilder.AddAttribute(2, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenElement(0, "div");
                sectionBuilder.AddAttribute(1, "class", "settings-section-content");
                sectionBuilder.OpenComponent<UISlider>(2);
                sectionBuilder.AddAttribute(3, "Value", 75.0);
                sectionBuilder.AddAttribute(4, "Min", 0.0);
                sectionBuilder.AddAttribute(5, "Max", 100.0);
                sectionBuilder.AddAttribute(6, "FullWidth", true);
                sectionBuilder.CloseComponent();
                sectionBuilder.CloseElement();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "AUTO-BRIGHTNESS");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Auto-Brightness");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", true);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
    
    private RenderFragment RenderPrivacyContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Location Services");
                sectionBuilder.AddAttribute(2, "Detail", "On");
                sectionBuilder.AddAttribute(3, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Footer", "Location Services allows apps to use information from cellular, Wi-Fi, and GPS networks.");
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
    
    private RenderFragment RenderGeneralContent() => builder =>
    {
        builder.OpenComponent<GeneralSettings>(0);
        builder.AddAttribute(1, "OnBack", EventCallback.Factory.Create(this, NavigateBack));
        builder.CloseComponent();
    };
    
    private RenderFragment RenderICloudContent() => builder =>
    {
        builder.OpenElement(0, "div");
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(2);
        builder.AddAttribute(3, "Grouped", true);
        builder.AddAttribute(4, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "Header", "ACCOUNT");
            tableBuilder.AddAttribute(2, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Apple ID");
                sectionBuilder.AddAttribute(2, "Detail", "user@icloud.com");
                sectionBuilder.AddAttribute(3, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(4, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "STORAGE");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Storage & Backup");
                sectionBuilder.AddAttribute(2, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(3, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement(); // settings-content
    };
    
    private RenderFragment RenderSafariContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "Header", "GENERAL");
            tableBuilder.AddAttribute(2, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Search Engine");
                sectionBuilder.AddAttribute(2, "Detail", "Google");
                sectionBuilder.AddAttribute(3, "ShowDisclosure", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "AutoFill");
                sectionBuilder.AddAttribute(6, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(7, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "PRIVACY");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Private Browsing");
                sectionBuilder.AddAttribute(2, "ShowToggle", true);
                sectionBuilder.AddAttribute(3, "ToggleValue", false);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "Accept Cookies");
                sectionBuilder.AddAttribute(6, "Detail", "From visited");
                sectionBuilder.AddAttribute(7, "ShowDisclosure", true);
                sectionBuilder.AddAttribute(8, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
    
    private RenderFragment RenderMailContent() => builder =>
    {
        builder.AddAttribute(1, "class", "settings-content");
        
        builder.OpenComponent<UITableView>(8);
        builder.AddAttribute(9, "Grouped", true);
        builder.AddAttribute(10, "ChildContent", (RenderFragment)(tableBuilder =>
        {
            tableBuilder.OpenComponent<UITableViewSection>(0);
            tableBuilder.AddAttribute(1, "Header", "ACCOUNTS");
            tableBuilder.AddAttribute(2, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Add Account...");
                sectionBuilder.AddAttribute(2, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
            
            tableBuilder.OpenComponent<UITableViewSection>(2);
            tableBuilder.AddAttribute(3, "Header", "MAIL");
            tableBuilder.AddAttribute(4, "ChildContent", (RenderFragment)(sectionBuilder =>
            {
                sectionBuilder.OpenComponent<UITableViewCell>(0);
                sectionBuilder.AddAttribute(1, "Text", "Preview");
                sectionBuilder.AddAttribute(2, "Detail", "2 Lines");
                sectionBuilder.AddAttribute(3, "ShowDisclosure", true);
                sectionBuilder.CloseComponent();
                
                sectionBuilder.OpenComponent<UITableViewCell>(4);
                sectionBuilder.AddAttribute(5, "Text", "Show To/Cc Label");
                sectionBuilder.AddAttribute(6, "ShowToggle", true);
                sectionBuilder.AddAttribute(7, "ToggleValue", true);
                sectionBuilder.AddAttribute(8, "IsLast", true);
                sectionBuilder.CloseComponent();
            }));
            tableBuilder.CloseComponent();
        }));
        builder.CloseComponent();
        
        builder.CloseElement();
    };
}
